jdbc.url=jdbc:oracle:thin:@localhost:1521:XE
db.username=C##denis
db.password=Admin1234


### ADMIN QUERIES

# ???????? ????????????
query.admin.insert_user=INSERT INTO USERS (ID, TYPE, LOGIN, PASSWORD, STATUS, NAME) VALUES (C##DENIS.USERS_SEQ.NEXTVAL, ?, ?, ?, ?, ?)

query.admin.get_all_users=SELECT * FROM USERS

# ????????? ???????????? ?? ID
query.admin.get_user_by_id=SELECT * FROM USERS WHERE ID = ?

# ?????????? ?????????? ? ????????????
query.admin.update_user=UPDATE USERS SET TYPE = ?, LOGIN = ?, PASSWORD = ?, STATUS = ?, NAME = ? WHERE ID = ?

# ???????? ???????????? ?? ID
query.admin.delete_user_by_id=DELETE FROM USERS WHERE ID = ?

# ????????? ?????? ???? ????????????? ????????????? ????
query.admin.get_users_by_type=SELECT * FROM USERS WHERE TYPE = ?

# ????????? ?????? ???? ???????? ?????????????

# ????? ???????????? ?? ?????
query.admin.search_user_by_name=SELECT * FROM USERS WHERE NAME = ?

# ????????? ?????? ???? ????????????? ????????????? ???? ? ???????
query.admin.get_users_by_type_and_status=SELECT * FROM USERS WHERE TYPE = ? AND STATUS = ?

# ????????? ?????? ????????????? ? ???????????? ????????
query.admin.get_users_by_status=SELECT * FROM USERS WHERE STATUS = ?


### LIBRARIAN QUERIES

# ???????? ???????????? (?? ???????????? ? ????????????)
query.librarian.insert_user=INSERT INTO USERS (ID, TYPE, LOGIN, PASSWORD, STATUS, NAME) VALUES (C##DENIS.USERS_SEQ.NEXTVAL, ?, 'READER', ?, ?, ?)

# ?????????? ??????? ????????????
query.librarian.update_user_status=UPDATE USERS SET STATUS = ? WHERE ID = ?

# ??????? ???? ?????? ?? ??????? AUTHORS
query.librarian.select_all_authors=SELECT * FROM AUTHORS

# ??????? ???? ?????? ?? ??????? GENRES
query.librarian.select_all_genres=SELECT * FROM GENRES

# ??????? ???? ?????? ?? ??????? PUBLISHERS
query.librarian.select_all_publishers=SELECT * FROM PUBLISHERS

# ???????? ?????? ?? ??????? AUTHORS
query.librarian.delete_author_by_name=DELETE FROM AUTHORS WHERE AUTHOR_NAME = ?

# ???????? ?????? ?? ??????? GENRES
query.librarian.delete_genre_by_name=DELETE FROM GENRES WHERE GENRE_NAME = ?

# ???????? ?????? ?? ??????? PUBLISHERS
query.librarian.delete_publisher_by_name=DELETE FROM PUBLISHERS WHERE PUBLISHER_NAME = ?


# ?????????? ?????? ? ??????? AUTHORS
query.librarian.insert_author=INSERT INTO AUTHORS (AUTHOR_NAME) VALUES (?)

# ?????????? ?????? ? ??????? GENRES
query.librarian.insert_genre=INSERT INTO GENRES (GENRE_NAME) VALUES (?)

# ?????????? ?????? ? ??????? PUBLISHERS
query.librarian.insert_publisher=INSERT INTO PUBLISHERS (PUBLISHER_NAME) VALUES (?)

# ????????? ?????? ? ??????? AUTHORS
query.librarian.update_author_name=UPDATE AUTHORS SET AUTHOR_NAME = ? WHERE AUTHOR_NAME = ?

# ????????? ?????? ? ??????? GENRES
query.librarian.update_genre_name=UPDATE GENRES SET GENRE_NAME = ? WHERE GENRE_NAME = ?

# ????????? ?????? ? ??????? PUBLISHERS
query.librarian.update_publisher_name=UPDATE PUBLISHERS SET PUBLISHER_NAME = ? WHERE PUBLISHER_NAME = ?

query.librarian.get_all_book_catalog=SELECT * FROM BOOK_CATALOG

# ???????? ?????? ? ????? ? ????????
query.librarian.insert_book_catalog=INSERT INTO BOOK_CATALOG (BOOK_ID, TITLE, YEAR_PUBLISHED, AUTHOR_NAME, GENRE_NAME, PUBLISHER_NAME) VALUES (C##DENIS.BOOK_CATALOG_SEQ.NEXTVAL, ?, ?, ?, ?, ?)

# ????????? ?????????? ? ????? ?? ID
query.librarian.get_book_catalog_by_id=SELECT * FROM BOOK_CATALOG WHERE BOOK_ID = ?

# ?????????? ?????????? ? ????? ? ????????
query.librarian.update_book_catalog=UPDATE BOOK_CATALOG SET TITLE = ?, YEAR_PUBLISHED = ?, AUTHOR_NAME = ?, GENRE_NAME = ?, PUBLISHER_NAME = ? WHERE BOOK_ID = ?

# ???????? ?????????? ? ????? ?? ???????? ?? ID
query.librarian.delete_book_catalog_by_id=DELETE FROM BOOK_CATALOG WHERE BOOK_ID = ?

# ????????? ?????? ???? ???? ????????????? ????????
query.librarian.get_books_by_publisher=SELECT * FROM BOOK_CATALOG WHERE PUBLISHER_NAME LIKE '%' || ? || '%'

query.librarian.get_books_by_year_published=SELECT * FROM BOOK_CATALOG WHERE YEAR_PUBLISHED = ?

query.librarian.get_books_by_genre=SELECT * FROM BOOK_CATALOG WHERE GENRE_NAME LIKE '%' || ? || '%'

query.librarian.get_books_by_author=SELECT * FROM BOOK_CATALOG WHERE AUTHOR_NAME LIKE '%' || ? || '%'

# ????????? ?????? ???? ?? ????? ???????? (????????? ?????)
query.librarian.search_books_by_title=SELECT * FROM BOOK_CATALOG WHERE TITLE LIKE '%' || ? || '%'



# ???????? ?????? ? ????? ? ?????????
query.librarian.insert_book_inventory=INSERT INTO BOOK_INVENTORY (INVENTORY_ID, BOOK_ID, LOCATION, STATUS) VALUES (C##DENIS.INVENTORY_SEQUENCE.NEXTVAL, ?, ?, ?)

# ????????? ?????????? ? ????? ? ????????? ?? ID
query.librarian.get_book_inventory_by_id=SELECT * FROM BOOK_INVENTORY WHERE INVENTORY_ID = ?

# ?????????? ?????????? ? ????? ? ?????????
query.librarian.update_book_inventory=UPDATE BOOK_INVENTORY SET BOOK_ID = ?, LOCATION = ?, STATUS = ? WHERE INVENTORY_ID = ?

# ???????? ?????????? ? ????? ?? ????????? ?? ID
query.librarian.delete_book_inventory_by_id=DELETE FROM BOOK_INVENTORY WHERE INVENTORY_ID = ?

# ????????? ?????? ???? ???? ? ???????????? ????????
query.librarian.get_books_by_status=SELECT * FROM BOOK_INVENTORY WHERE STATUS = ?

# ????????? ?????? ???? ???? ??? ???????????? ????? ?? ????????
query.librarian.get_books_by_book_id=SELECT * FROM BOOK_INVENTORY WHERE BOOK_ID = ?

# ????????? ?????? ???? ????, ??????????? ?? ???????
query.librarian.get_books_on_repair=SELECT * FROM BOOK_INVENTORY WHERE STATUS = 'ON_REPAIR'

# ????????? ?????? ???? ????????? ????
query.librarian.get_lost_books=SELECT * FROM BOOK_INVENTORY WHERE STATUS = 'LOST'

# ????????? ?????? ???? ????????????????? ????
query.librarian.get_reserved_books=SELECT * FROM BOOK_INVENTORY WHERE STATUS = 'RESERVED'

# ?????????? ??????? ?????
query.librarian.update_book_status=UPDATE BOOK_INVENTORY SET STATUS = ? WHERE INVENTORY_ID = ?


# ???????? ?????? ? ????? ?????
query.librarian.create_loan=INSERT INTO LOANS (LOAN_ID, INVENTORY_ID, READER_ID, LOAN_DATE, DUE_DATE, STATUS) VALUES (C##DENIS.LOANS_SEQUENCE.NEXTVAL, ?, ?, ?, ?, ?)

# ????????? ?????????? ? ????? ????? ?? ID
query.librarian.get_loan_by_id=SELECT * FROM LOANS WHERE LOAN_ID = ?

# ?????????? ?????????? ? ????? ?????
query.librarian.update_loan=UPDATE LOANS SET INVENTORY_ID = ?, READER_ID = ?, LOAN_DATE = ?, DUE_DATE = ?, STATUS = ?, RETURN_DATE = ? WHERE LOAN_ID = ?

# ????????? ?????? ???? ?????? ??? ????????????? ????????
query.librarian.get_loans_by_reader=SELECT * FROM LOANS WHERE READER_ID = ?

# ????????? ?????? ???? ??????, ??????????? ? ???????????? ???????
query.librarian.get_loans_by_status=SELECT * FROM LOANS WHERE STATUS = ?

# ????????? ?????? ???? ??????, ???????????? ?? ???????????? ????
query.librarian.get_overdue_loans_by_date=SELECT * FROM LOANS WHERE DUE_DATE < ?

# ??????? ????? ?????? ? ?????? ??? ???????? ? ???????? READER_ID
query.librarian.insert_penalty=INSERT INTO PENALTIES (PENALTY_ID, READER_ID, VALIDITY, REASON, PENALTY_DATE, EXPIRATION_DATE, LIBRARIAN_ID) VALUES (C##DENIS.PENALTIES_SEQ.NEXTVAL, ?, ?, ?, ?, ?, ?)

# ?????????? ?????? ? ?????? ?? ??? ID ??? ??????????? ????????
query.librarian.update_penalty=UPDATE PENALTIES SET VALIDITY = ?, REASON = ?, PENALTY_DATE = ?, EXPIRATION_DATE = ?, LIBRARIAN_ID = ? WHERE PENALTY_ID = ? AND READER_ID = ?

# ???????? ?????? ?? ??? ID ??? ????????????? ????????
query.librarian.get_penalty_by_id=SELECT * FROM PENALTIES WHERE PENALTY_ID = ?

# ??????? ???? ??????? ??? ??????????? ????????
query.librarian.get_penalties_by_reader=SELECT * FROM PENALTIES WHERE READER_ID = ?

# ??????? ???????, ??????? ???????? ? ???????????? ????
query.librarian.get_penalties_expiring_by_date=SELECT * FROM PENALTIES WHERE EXPIRATION_DATE <= ?

# ??????? ???????, ?????????? ?????????? ?????????????
query.librarian.get_penalties_by_librarian=SELECT * FROM PENALTIES WHERE LIBRARIAN_ID = ?

# ?????????? ???? VALIDITY ? EXPIRATION_DATE ??? ?????? ? ???????????? PENALTY_ID
query.librarian.update_penalty_validity_expiration=UPDATE PENALTIES SET VALIDITY = ?, EXPIRATION_DATE = ? WHERE PENALTY_ID = ?


### READER QUERIES

# ?????????? ??????? ?????
query.reader.update_book_status=UPDATE BOOK_INVENTORY SET STATUS = ? WHERE INVENTORY_ID = ?

# ????????? ?????? ???? ????????? ????
query.reader.get_available_books=SELECT * FROM BOOK_INVENTORY WHERE STATUS = 'AVAILABLE'

query.reader.get_books_by_publisher=SELECT * FROM BOOK_CATALOG WHERE PUBLISHER_NAME LIKE '%' || ? || '%'

query.reader.get_books_by_year_published=SELECT * FROM BOOK_CATALOG WHERE YEAR_PUBLISHED LIKE '%' || ? || '%'

query.reader.get_books_by_genre=SELECT * FROM BOOK_CATALOG WHERE GENRE_NAME LIKE '%' || ? || '%'

query.reader.get_books_by_author=SELECT * FROM BOOK_CATALOG WHERE AUTHOR_NAME LIKE '%' || ? || '%'


# ????????? ?????? ???? ?? ????? ???????? (????????? ?????)
query.reader.search_books_by_title=SELECT * FROM BOOK_CATALOG WHERE TITLE LIKE '%' || ? || '%'


# ????????? ?????????? ? ????? ?? ID
query.reader.get_book_catalog_by_id=SELECT * FROM BOOK_CATALOG WHERE BOOK_ID = ?

# ???????? ?????? ? ????? ?????
query.reader.create_loan=INSERT INTO LOANS (LOAN_ID, INVENTORY_ID, READER_ID, LOAN_DATE, DUE_DATE, STATUS) VALUES (C##DENIS.LOANS_SEQUENCE.NEXTVAL, ?, ?, ?, ?, ?)

# ?????????? ??????? ????? ? BOOK_INVENTORY
query.reader.update_inventory_status_reserved=UPDATE BOOK_INVENTORY SET STATUS = 'RESERVED' WHERE INVENTORY_ID = ?

# ????????? ?????? ???? ?????? ??? ????????????? ????????
query.reader.get_loans_by_reader=SELECT * FROM LOANS WHERE READER_ID = ?

# ??????? ???? ??????? ??? ??????????? ????????
query.reader.get_penalties_by_reader=SELECT * FROM PENALTIES WHERE READER_ID = ?


### AUTHORIZATION AND REGISTRATION

query.credential.insert_user=INSERT INTO USERS (ID, TYPE, LOGIN, PASSWORD, STATUS, NAME) VALUES (C##DENIS.USERS_SEQ.NEXTVAL, ?, 'READER', ?, ?, ?)

query.credential.get_user_by_login_and_pass=SELECT * FROM USERS WHERE LOGIN = ? AND PASSWORD = ?

### EXCEPTIONAL BOOKVALUE CLASS

# ????????? ?????????? ???? ?????????????? ? ?????????? ?? book_id
query.bookvalue.get_num_books_by_id=SELECT BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME, COUNT(BI.INVENTORY_ID) AS NUM_OF_BOOKS FROM BOOK_CATALOG BC LEFT JOIN BOOK_INVENTORY BI ON BC.BOOK_ID = BI.BOOK_ID WHERE BC.BOOK_ID = ? GROUP BY BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME

# ????????? ?????????? ???? ???? ?????????????? ? ??????????
query.bookvalue.get_all_num_books=SELECT BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME, COUNT(BI.INVENTORY_ID) AS NUM_OF_BOOKS FROM BOOK_CATALOG BC LEFT JOIN BOOK_INVENTORY BI ON BC.BOOK_ID = BI.BOOK_ID GROUP BY BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME

# ????????? ?????????? ???? ?????????????? ? ?????????? ? ???????????? ????????
query.bookvalue.get_num_books_by_status=SELECT BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME, COUNT(CASE WHEN BI.STATUS = ? THEN BI.INVENTORY_ID ELSE NULL END) AS NUM_OF_BOOKS FROM BOOK_CATALOG BC LEFT JOIN BOOK_INVENTORY BI ON BC.BOOK_ID = BI.BOOK_ID GROUP BY BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME

# ????????? ?????????? ???? ?????????????? ? ?????????? ? ???????????? ???????? ? book_id
query.bookvalue.get_num_books_by_status_and_id=SELECT BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME, COUNT(CASE WHEN BI.STATUS = ? THEN BI.INVENTORY_ID ELSE NULL END) AS NUM_OF_BOOKS FROM BOOK_CATALOG BC LEFT JOIN BOOK_INVENTORY BI ON BC.BOOK_ID = BI.BOOK_ID WHERE BC.BOOK_ID = ? GROUP BY BC.BOOK_ID, BC.TITLE, BC.YEAR_PUBLISHED, BC.AUTHOR_NAME, BC.GENRE_NAME, BC.PUBLISHER_NAME

query.scores.add_new_score=INSERT INTO BOOK_SCORES (BOOK_ID, USER_ID, SCORE) VALUES (?, ?, ?)

query.rating.update_rating=UPDATE BOOK_RATING SET RATING = ? WHERE BOOK_ID = ?

query.rating.add_new_rating=INSERT INTO BOOK_RATING (BOOK_ID, RATING) VALUES (?, ?)
